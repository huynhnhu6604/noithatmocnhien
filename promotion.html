<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>N·ªôi th·∫•t M·ªôc Nhi√™n</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
        
        <!-- Firebase SDK -->
        <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>
        
        <!-- Sweetalert2 -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <script>
            // C·∫•u h√¨nh Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyBHTL0ZIZkmRNi7kRF8UJdjR1qhx8cdre4",
                authDomain: "webnoithat-de11f.firebaseapp.com",
                databaseURL: "https://webnoithat-de11f-default-rtdb.firebaseio.com",
                projectId: "webnoithat-de11f",
                storageBucket: "webnoithat-de11f.firebasestorage.app",
                messagingSenderId: "919918511984",
                appId: "1:919918511984:web:d1b260dc52102fd279b1b5",
                measurementId: "G-H1G2WJETSH"
            };

            // Kh·ªüi t·∫°o Firebase
            firebase.initializeApp(firebaseConfig);
            const analytics = firebase.analytics();
            const auth = firebase.auth();
            const database = firebase.database();

            // H√†m hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng
            function showSuccess(title, text) {
                Swal.fire({
                    title: title,
                    text: text,
                    icon: 'success',
                    confirmButtonText: 'OK'
                });
            }

            // H√†m hi·ªÉn th·ªã th√¥ng b√°o l·ªói
            function showError(title, text) {
                Swal.fire({
                    title: title,
                    text: text,
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
            }

            // H√†m hi·ªÉn th·ªã x√°c nh·∫≠n
            function showConfirm(title, text) {
                return Swal.fire({
                    title: title,
                    text: text,
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'ƒê·ªìng √Ω',
                    cancelButtonText: 'H·ªßy'
                });
            }

            // H√†m hi·ªÉn th·ªã modal
            function showModal(modalId) {
                document.getElementById('modalOverlay').style.display = 'block';
                document.getElementById(modalId).classList.add('active');
            }
        </script>

        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body {
                font-family: 'Montserrat', sans-serif;
                background-color: #f9f7f3;
            }
            .header-top {
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: #5a3d2b;
                padding: 18px 0 12px 0;
                box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            }
            .logo {
                width: 90px;
                height: 90px;
                margin-right: 18px;
                border-radius: 60%;
                border: 3px solid #e9c46a;
                box-shadow: 0 0 15px rgba(233, 196, 106, 0.6);
                transition: transform 0.3s, box-shadow 0.3s;
                object-fit: cover;
            }
            .logo:hover {
                transform: scale(1.05);
                box-shadow: 0 0 20px rgba(233, 196, 106, 0.8);
            }
            .store-name {
                font-family: 'Great Vibes', cursive;
                font-size: 2.7rem;
                font-weight: 400;
                color: #e9c46a;
                text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
                letter-spacing: 1.5px;
            }
            .header-nav {
                width: 100%;
                background-color: #4a3322;
                box-shadow: 0 2px 8px rgba(0,0,0,0.04);
                display: flex;
                justify-content: center;
            }
            .nav-links {
                display: flex;
                align-items: center;
                gap: 10px;
                flex-wrap: wrap;
                justify-content: center;
                padding: 0 10px;
                min-height: 48px;
            }
            .nav-btn {
                font-family: 'Montserrat', sans-serif;
                text-decoration: none;
                color: #f9f7f3;
                font-weight: 500;
                padding: 8px 12px;
                border-radius: 5px;
                transition: all 0.3s;
                border: 1px solid transparent;
                letter-spacing: 0.5px;
                text-transform: uppercase;
                font-size: 0.75rem;
                position: relative;
                white-space: nowrap;
            }
            .nav-btn:hover {
                background-color: rgba(233, 196, 106, 0.2);
                border-color: #e9c46a;
            }
            .active {
                background-color: rgba(233, 196, 106, 0.2);
                border: 1px solid #e9c46a;
            }
            
            /* Dropdown menu */
            .dropdown {
                position: relative;
            }
            .mega-menu {
                display: none;
                position: absolute;
                left: 0;
                top: 100%;
                background: #fff;
                box-shadow: 0 8px 24px rgba(0,0,0,0.15);
                padding: 24px 32px;
                display: flex;
                gap: 40px;
                z-index: 100;
                min-width: 800px;
                opacity: 0;
                visibility: hidden;
                transform: translateY(10px);
                transition: all 0.3s ease;
            }
            .dropdown:hover .mega-menu {
                display: flex;
                opacity: 1;
                visibility: visible;
                transform: translateY(0);
            }
            .mega-column {
                display: flex;
                flex-direction: column;
                min-width: 160px;
                margin-right: 24px;
            }
            .mega-menu a {
                color: #555;
                padding: 8px 0;
                text-decoration: none;
                font-size: 0.9rem;
                transition: all 0.2s;
                border-bottom: 1px solid transparent;
            }
            .mega-menu a:hover {
                color: #e9c46a;
                border-bottom: 1px solid #e9c46a;
                transform: translateX(5px);
            }
            
            /* Th√™m m≈©i t√™n cho dropdown */
            .dropdown > .nav-btn::after {
                content: '‚ñº';
                font-size: 0.7em;
                margin-left: 5px;
                display: inline-block;
                transition: transform 0.3s;
            }
            .dropdown:hover > .nav-btn::after {
                transform: rotate(180deg);
            }
            
            /* N√∫t gi·ªè h√†ng */
            .cart-btn {
                display: flex;
                align-items: center;
                gap: 10px;
                color: #d9d1cc;
                padding: 8px 12px;
                border-radius: 5px;
                text-decoration: none;
                transition: all 0.3s;
                font-weight: 600;
                margin-left: 10px;
                font-size: 0.75rem;
            }
            .cart-icon {
                font-size: 2rem;
            }
            .cart-btn:hover {
                background: #d4b054;
                transform: translateY(-2px);
            }
            
            /* Style cho n√∫t ƒëƒÉng nh·∫≠p */
            .login-btn {
                display: flex;
                align-items: center;
                gap: 6px;
                color: #5a3d2b;
                padding: 8px 16px;
                border-radius: 5px;
                text-decoration: none;
                transition: all 0.3s;
                font-weight: 600;
                margin-left: 10px;
                font-size: 0.75rem;
                background-color: #e9c46a;
                border: 1px solid #e9c46a;
            }
            .login-btn:hover {
                background-color: #5a3d2b;
                color: #e9c46a;
                transform: translateY(-2px);
            }
            main {
                padding: 30px;
                min-height: 600px;
                background-color: #f9f7f3;
            }
            .banner {
                width: 100%;
                max-height: 600px;
                position: relative;
                overflow: hidden;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .banner-image {
                width: 100%;
                height: auto;
                min-height: 400px;
                max-height: 600px;
                object-fit: cover;
                object-position: center;
                transition: transform 10s ease;
                display: block;
                image-rendering: -webkit-optimize-contrast;
                image-rendering: crisp-edges;
                -webkit-image-rendering: crisp-edges;
                backface-visibility: hidden;
            }
            .banner:hover .banner-image {
                transform: scale(1.05);
            }
            .banner-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.1));
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                color: white;
                padding: 0 20px;
                text-align: center;
            }
            .banner-title {
                font-family: 'Great Vibes', cursive;
                font-size: 4rem;
                margin-bottom: 20px;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.6);
                color: #ffffff;
            }
            .banner-subtitle {
                font-family: 'Montserrat', sans-serif;
                font-size: 1.5rem;
                font-weight: 300;
                max-width: 800px;
                text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
                color: #ffffff;
            }
            /* Ph·∫ßn footer */
            .footer {
                background-color: #5a3d2b;
                color: #e9e2d0;
                padding: 50px 0 20px;
            }
            .footer-container {
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 20px;
            }
            .footer-section {
                flex: 1;
                min-width: 250px;
                margin-bottom: 30px;
                padding: 0 15px;
            }
            .footer-title {
                font-size: 1.3rem;
                font-weight: 600;
                margin-bottom: 20px;
                color: #e9c46a;
                position: relative;
                padding-bottom: 10px;
            }
            .footer-title::after {
                content: '';
                position: absolute;
                bottom: 0;
                left: 0;
                width: 50px;
                height: 2px;
                background-color: #e9c46a;
            }
            .footer-contact-item {
                display: flex;
                align-items: flex-start;
                margin-bottom: 15px;
            }
            .footer-contact-icon {
                min-width: 20px;
                margin-right: 10px;
                color: #e9c46a;
            }
            .footer-links {
                list-style: none;
            }
            .footer-links li {
                margin-bottom: 10px;
            }
            .footer-links a {
                color: #e9e2d0;
                text-decoration: none;
                transition: color 0.3s;
            }
            .footer-links a:hover {
                color: #e9c46a;
            }
            .footer-bottom {
                text-align: center;
                padding-top: 20px;
                margin-top: 20px;
                border-top: 1px solid rgba(233, 196, 106, 0.2);
                font-size: 0.9rem;
            }

            .posters {
                display: flex;
                gap: 30px;
                justify-content: center;
                align-items: stretch;
                margin: 40px 0 60px 0;
                flex-wrap: wrap;
            }
            .poster {
                background: #fff8ed;
                border-radius: 16px;
                box-shadow: 0 4px 16px rgba(90,61,43,0.08);
                overflow: hidden;
                width: 320px;
                display: flex;
                flex-direction: column;
                transition: transform 0.2s, box-shadow 0.2s;
                border: 1.5px solid #e9c46a;
                cursor: pointer;
            }
            .poster:hover {
                transform: translateY(-6px) scale(1.03);
                box-shadow: 0 8px 32px rgba(90,61,43,0.16);
            }
            .poster-img {
                width: 100%;
                height: 170px;
                object-fit: cover;
                background: #e9e2d0;
            }
            .poster-content {
                padding: 20px 18px 24px 18px;
                flex: 1;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }
            .poster-title {
                font-size: 1.25rem;
                color: #5a3d2b;
                margin-bottom: 10px;
                font-weight: 700;
            }
            .poster-desc {
                color: #4a3322;
                font-size: 1rem;
                margin-bottom: 18px;
            }
            .poster-btn {
                display: inline-block;
                background: #e9c46a;
                color: #5a3d2b;
                padding: 8px 20px;
                border-radius: 6px;
                text-decoration: none;
                font-weight: 600;
                letter-spacing: 0.5px;
                transition: background 0.2s, color 0.2s;
            }
            .poster-btn:hover {
                background: #5a3d2b;
                color: #fff8ed;
            }

            /* Styles cho modal */
            .modal-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 1000;
                -webkit-backdrop-filter: blur(5px);
                backdrop-filter: blur(5px);
            }

            .modal {
                display: none;
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #fff8ed;
                padding: 30px;
                border-radius: 12px;
                box-shadow: 0 5px 30px rgba(0, 0, 0, 0.15);
                z-index: 1001;
                width: 90%;
                max-width: 400px;
            }

            .modal.active {
                display: block;
            }

            .modal-header {
                text-align: center;
                margin-bottom: 25px;
            }

            .modal-title {
                color: #5a3d2b;
                font-size: 1.5rem;
                font-weight: 600;
                margin-bottom: 10px;
            }

            .modal-subtitle {
                color: #4a3322;
                font-size: 0.9rem;
                margin-bottom: 20px;
            }

            .modal-form {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }

            .form-group {
                position: relative;
            }

            .form-input {
                width: 100%;
                padding: 12px 15px;
                border: 1.5px solid #e9c46a;
                border-radius: 8px;
                font-size: 0.9rem;
                color: #5a3d2b;
                background: #fff;
                transition: all 0.3s;
            }

            .form-input:focus {
                outline: none;
                border-color: #5a3d2b;
                box-shadow: 0 0 0 2px rgba(90, 61, 43, 0.1);
            }

            .form-button {
                width: 100%;
                padding: 12px;
                background: #e9c46a;
                color: #5a3d2b;
                border: none;
                border-radius: 8px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
            }

            .form-button:hover:not(:disabled) {
                background: #5a3d2b;
                color: #fff8ed;
            }

            .form-button:disabled {
                opacity: 0.7;
                cursor: not-allowed;
            }

            .modal-links {
                margin-top: 20px;
                text-align: center;
                font-size: 0.9rem;
            }

            .modal-link {
                color: #5a3d2b;
                text-decoration: none;
                cursor: pointer;
                transition: color 0.3s;
            }

            .modal-link:hover {
                color: #e9c46a;
            }

            .spinner {
                width: 20px;
                height: 20px;
                border: 2px solid #5a3d2b;
                border-top: 2px solid transparent;
                border-radius: 50%;
                animation: spin 0.8s linear infinite;
                display: none;
            }

            .form-button:disabled .spinner {
                display: inline-block;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            /* Styles cho c√°c section m·ªõi */
            .section-header {
                text-align: center;
                margin-bottom: 40px;
                padding: 0 20px;
            }

            .section-header h2 {
                font-size: 2.5rem;
                color: #5a3d2b;
                margin-bottom: 15px;
                font-weight: 600;
            }

            .section-header p {
                color: #666;
                font-size: 1.1rem;
                max-width: 600px;
                margin: 0 auto;
            }

            /* Featured Products */
            .featured-products {
                padding: 60px 20px;
                background: #fff;
            }

            .product-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 30px;
                max-width: 1200px;
                margin: 0 auto;
            }

            .product-card {
                background: #fff;
                border-radius: 12px;
                overflow: hidden;
                box-shadow: 0 4px 20px rgba(0,0,0,0.08);
                transition: transform 0.3s, box-shadow 0.3s;
                position: relative;
            }

            .product-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            }

            .product-badge {
                position: absolute;
                top: 15px;
                right: 15px;
                background: #e9c46a;
                color: #5a3d2b;
                padding: 5px 12px;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 600;
            }

            .product-image {
                width: 100%;
                height: 250px;
                object-fit: cover;
            }

            .product-info {
                padding: 20px;
            }

            .product-info h3 {
                font-size: 1.2rem;
                color: #5a3d2b;
                margin-bottom: 10px;
            }

            .product-price {
                color: #e9c46a;
                font-size: 1.3rem;
                font-weight: 600;
                margin-bottom: 15px;
            }

            .product-actions {
                display: flex;
                gap: 10px;
            }

            .btn-primary, .btn-secondary {
                padding: 8px 20px;
                border-radius: 6px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s;
                border: none;
            }

            .btn-primary {
                background: #e9c46a;
                color: #5a3d2b;
            }

            .btn-secondary {
                background: transparent;
                border: 2px solid #e9c46a;
                color: #5a3d2b;
            }

            .btn-primary:hover {
                background: #5a3d2b;
                color: #e9c46a;
            }

            .btn-secondary:hover {
                background: #e9c46a;
            }

            /* Collections */
            .collections {
                padding: 60px 20px;
                background: #f9f7f3;
            }

            .collection-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 30px;
                max-width: 1200px;
                margin: 0 auto;
            }

            .collection-card {
                position: relative;
                border-radius: 12px;
                overflow: hidden;
                height: 400px;
            }

            .collection-image {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transition: transform 0.5s;
            }

            .collection-overlay {
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                background: linear-gradient(transparent, rgba(0,0,0,0.7));
                padding: 30px;
                color: white;
                transform: translateY(100px);
                transition: transform 0.3s;
            }

            .collection-card:hover .collection-image {
                transform: scale(1.1);
            }

            .collection-card:hover .collection-overlay {
                transform: translateY(0);
            }

            .collection-overlay h3 {
                font-size: 1.5rem;
                margin-bottom: 10px;
            }

            .btn-outline {
                display: inline-block;
                padding: 8px 20px;
                border: 2px solid white;
                color: white;
                text-decoration: none;
                border-radius: 6px;
                margin-top: 15px;
                transition: all 0.3s;
            }

            .btn-outline:hover {
                background: white;
                color: #5a3d2b;
            }

            /* Services */
            .services {
                padding: 60px 20px;
                background: #fff;
            }

            .service-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 2rem;
                padding: 2rem;
            }

            .service-card {
                background: #fff;
                border-radius: 15px;
                padding: 2rem;
                text-align: center;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
                transition: transform 0.3s ease, box-shadow 0.3s ease;
                position: relative;
                display: flex;
                flex-direction: column;
                height: 100%;
            }

            .service-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            }

            .promotion-status {
                position: absolute;
                top: 1rem;
                right: 1rem;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-size: 0.9rem;
                font-weight: 600;
            }

            .promotion-status.upcoming {
                background: #e3f2fd;
                color: #1976d2;
            }

            .promotion-status.current {
                background: #e8f5e9;
                color: #2e7d32;
            }

            .promotion-status.ended {
                background: #ffebee;
                color: #c62828;
            }

            .service-icon {
                font-size: 3rem;
                margin-bottom: 1.5rem;
                color: #4a90e2;
            }

            .service-card h3 {
                color: #333;
                margin-bottom: 1rem;
                font-size: 1.5rem;
            }

            .service-card p {
                color: #666;
                margin-bottom: 1.5rem;
                line-height: 1.6;
            }

            .promotion-details {
                margin-top: auto;
                padding-top: 1.5rem;
                border-top: 1px solid #eee;
            }

            .promo-code-container {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
                margin-bottom: 1rem;
                background: #f8f9fa;
                padding: 0.8rem;
                border-radius: 8px;
            }

            .promo-code {
                margin: 0;
                font-size: 1.1rem;
            }

            .copy-btn {
                background: #4a90e2;
                color: white;
                border: none;
                padding: 0.5rem 1rem;
                border-radius: 5px;
                cursor: pointer;
                transition: background 0.3s ease;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .copy-btn:hover {
                background: #357abd;
            }

            .promo-values {
                display: flex;
                flex-direction: column;
                gap: 0.8rem;
                margin-bottom: 1rem;
            }

            .promo-value, .promo-min-order {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                margin: 0;
                color: #555;
            }

            .promo-value i, .promo-min-order i {
                color: #4a90e2;
            }

            .promo-period {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
                color: #666;
                font-size: 0.9rem;
            }

            .promo-period i {
                color: #4a90e2;
            }

            @media (max-width: 768px) {
                .service-grid {
                    grid-template-columns: 1fr;
                    padding: 1rem;
                }

                .service-card {
                    padding: 1.5rem;
                }

                .promo-code-container {
                    flex-direction: column;
                    gap: 0.5rem;
                }

                .copy-btn {
                    width: 100%;
                    justify-content: center;
                }
            }

            /* News */
            .news {
                padding: 60px 20px;
                background: #f9f7f3;
            }

            .news-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 30px;
                max-width: 1200px;
                margin: 0 auto;
            }

            .news-card {
                background: white;
                border-radius: 12px;
                overflow: hidden;
                box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            }

            .news-image {
                width: 100%;
                height: 200px;
                object-fit: cover;
            }

            .news-content {
                padding: 20px;
            }

            .news-date {
                color: #666;
                font-size: 0.9rem;
            }

            .news-content h3 {
                color: #5a3d2b;
                margin: 10px 0;
                font-size: 1.2rem;
            }

            .read-more {
                display: inline-block;
                color: #e9c46a;
                text-decoration: none;
                margin-top: 15px;
                font-weight: 600;
            }

            /* Testimonials */
            .testimonials {
                padding: 60px 20px;
                background: #fff;
            }

            .testimonial-slider {
                max-width: 800px;
                margin: 0 auto;
            }

            .testimonial-card {
                background: #f9f7f3;
                padding: 30px;
                border-radius: 12px;
                margin: 20px;
            }

            .testimonial-content {
                font-style: italic;
                color: #666;
                margin-bottom: 20px;
            }

            .testimonial-author {
                display: flex;
                align-items: center;
                gap: 15px;
            }

            .author-image {
                width: 60px;
                height: 60px;
                border-radius: 50%;
                object-fit: cover;
            }

            .author-info h4 {
                color: #5a3d2b;
                margin-bottom: 5px;
            }

            .author-info p {
                color: #666;
                font-size: 0.9rem;
            }

            /* Contact */
            .contact {
                padding: 80px 20px;
                background-color: #f9f7f3;
            }

            .contact-header {
                text-align: center;
                margin-bottom: 50px;
            }

            .contact-header h2 {
                font-size: 2.5rem;
                color: #5a3d2b;
                margin-bottom: 15px;
            }

            .contact-header p {
                color: #666;
                font-size: 1.1rem;
            }

            .contact-container {
                max-width: 1200px;
                margin: 0 auto;
                display: grid;
                grid-template-columns: 1fr 2fr;
                gap: 50px;
            }

            .contact-info {
                background: white;
                padding: 30px;
                border-radius: 12px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            }

            .info-item {
                display: flex;
                align-items: flex-start;
                gap: 15px;
                margin-bottom: 25px;
            }

            .info-item:last-child {
                margin-bottom: 0;
            }

            .info-item i {
                font-size: 1.5rem;
                color: #e9c46a;
                margin-top: 5px;
            }

            .info-item h3 {
                font-size: 1.2rem;
                color: #5a3d2b;
                margin-bottom: 5px;
            }

            .info-item p {
                color: #666;
                line-height: 1.5;
            }

            .contact-form {
                background: white;
                padding: 30px;
                border-radius: 12px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            }

            .form-group {
                margin-bottom: 20px;
            }

            .form-group label {
                display: block;
                margin-bottom: 8px;
                color: #5a3d2b;
                font-weight: 500;
            }

            .form-control {
                width: 100%;
                padding: 12px;
                border: 1px solid #ddd;
                border-radius: 6px;
                font-size: 1rem;
            }

            .form-control:focus {
                outline: none;
                border-color: #e9c46a;
                box-shadow: 0 0 0 3px rgba(233, 196, 106, 0.2);
            }

            textarea.form-control {
                resize: vertical;
                min-height: 120px;
            }

            .btn {
                padding: 12px 24px;
                border: none;
                border-radius: 6px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s;
                font-size: 1rem;
            }

            .btn-primary {
                background: #e9c46a;
                color: #5a3d2b;
            }

            .btn-primary:hover {
                background: #5a3d2b;
                color: #e9c46a;
            }

            @media (max-width: 768px) {
                .contact-container {
                    grid-template-columns: 1fr;
                }
                
                .contact-header h2 {
                    font-size: 2rem;
                }
            }

            /* Styles cho ph·∫ßn hi·ªÉn th·ªã khuy·∫øn m√£i */
            .service-card {
                text-align: center;
                padding: 30px;
                background: #f9f7f3;
                border-radius: 12px;
                transition: transform 0.3s;
                border: 1px solid #e9c46a;
            }

            .service-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 5px 15px rgba(90, 61, 43, 0.1);
            }

            .service-icon {
                font-size: 2.5rem;
                margin-bottom: 20px;
            }

            .service-card h3 {
                color: #5a3d2b;
                margin-bottom: 15px;
                font-size: 1.3rem;
            }

            .service-card p {
                color: #666;
                margin-bottom: 15px;
                line-height: 1.5;
            }

            .promotion-details {
                background: #fff;
                padding: 15px;
                border-radius: 8px;
                margin: 15px 0;
                text-align: left;
            }

            .promo-code {
                color: #e9c46a;
                font-size: 1.1rem;
                margin-bottom: 10px;
            }

            .promo-value, .promo-min-order {
                color: #5a3d2b;
                margin-bottom: 8px;
            }

            .promo-period {
                color: #666;
                font-size: 0.9rem;
                display: flex;
                align-items: center;
                gap: 5px;
            }

            .promo-period i {
                color: #e9c46a;
            }

            .btn-primary {
                background: #e9c46a;
                color: #5a3d2b;
                padding: 10px 20px;
                border: none;
                border-radius: 6px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s;
                width: 100%;
                margin-top: 15px;
            }

            .btn-primary:hover {
                background: #5a3d2b;
                color: #e9c46a;
            }

            /* Styles cho banner khuy·∫øn m√£i */
            .promotion-banner {
                background: linear-gradient(rgba(90, 61, 43, 0.8), rgba(90, 61, 43, 0.8)), url('picture/banner1.webp');
                background-size: cover;
                background-position: center;
                padding: 80px 20px;
                text-align: center;
                color: #fff;
                margin-bottom: 40px;
            }

            .banner-content h1 {
                font-size: 3rem;
                margin-bottom: 20px;
                font-weight: 600;
            }

            .banner-content p {
                font-size: 1.2rem;
                opacity: 0.9;
            }

            /* Styles cho danh m·ª•c khuy·∫øn m√£i */
            .promotion-categories {
                background: #fff;
                padding: 20px 0;
                margin-bottom: 40px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 20px;
            }

            .category-tabs {
                display: flex;
                gap: 15px;
                justify-content: center;
                flex-wrap: wrap;
            }

            .tab-btn {
                padding: 10px 25px;
                border: 2px solid #e9c46a;
                border-radius: 25px;
                background: transparent;
                color: #5a3d2b;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s;
            }

            .tab-btn:hover, .tab-btn.active {
                background: #e9c46a;
                color: #fff;
            }

            /* Styles cho danh s√°ch khuy·∫øn m√£i */
            .promotion-list {
                padding: 40px 0;
            }

            .promotion-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 30px;
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
            }

            /* Styles cho th√¥ng tin th√™m */
            .promotion-info {
                background: #f9f7f3;
                padding: 60px 0;
                margin-top: 40px;
            }

            .info-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 30px;
            }

            .info-card {
                text-align: center;
                padding: 30px;
                background: #fff;
                border-radius: 12px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.05);
                transition: transform 0.3s;
            }

            .info-card:hover {
                transform: translateY(-5px);
            }

            .info-icon {
                font-size: 2.5rem;
                margin-bottom: 20px;
            }

            .info-card h3 {
                color: #5a3d2b;
                margin-bottom: 15px;
                font-size: 1.3rem;
            }

            .info-card p {
                color: #666;
                line-height: 1.6;
            }

            /* Responsive */
            @media (max-width: 768px) {
                .banner-content h1 {
                    font-size: 2rem;
                }

                .banner-content p {
                    font-size: 1rem;
                }

                .category-tabs {
                    flex-direction: column;
                    align-items: stretch;
                }

                .tab-btn {
                    width: 100%;
                }
            }

            /* Styles cho ph·∫ßn hi·ªÉn th·ªã khuy·∫øn m√£i */
            .service-card {
                position: relative;
                text-align: center;
                padding: 30px;
                background: #fff;
                border-radius: 12px;
                transition: all 0.3s;
                border: 1px solid #e9c46a;
                overflow: hidden;
            }

            .service-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 5px 15px rgba(90, 61, 43, 0.1);
            }

            .promotion-status {
                position: absolute;
                top: 15px;
                right: 15px;
                padding: 5px 15px;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 600;
                z-index: 1;
            }

            .promotion-status.current {
                background: #4CAF50;
                color: white;
            }

            .promotion-status.upcoming {
                background: #2196F3;
                color: white;
            }

            .promotion-status.ended {
                background: #9E9E9E;
                color: white;
            }

            .service-icon {
                font-size: 3rem;
                margin-bottom: 20px;
                color: #e9c46a;
            }

            .service-card h3 {
                color: #5a3d2b;
                margin-bottom: 15px;
                font-size: 1.3rem;
                min-height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .service-card p {
                color: #666;
                margin-bottom: 15px;
                line-height: 1.5;
                flex-grow: 1;
            }

            .promotion-details {
                background: #f9f7f3;
                padding: 20px;
                border-radius: 8px;
                margin-top: auto;
            }

            .promo-code-container {
                display: flex;
                align-items: center;
                justify-content: space-between;
                background: #fff;
                padding: 10px 15px;
                border-radius: 6px;
                margin-bottom: 15px;
                border: 1px solid #e9c46a;
            }

            .promo-code {
                color: #e9c46a;
                font-size: 1.1rem;
                margin: 0;
                font-weight: 600;
            }

            .copy-btn {
                background: none;
                border: none;
                color: #5a3d2b;
                cursor: pointer;
                padding: 5px;
                transition: all 0.3s;
            }

            .copy-btn:hover {
                color: #e9c46a;
            }

            .promo-values {
                display: grid;
                gap: 10px;
                margin-bottom: 15px;
            }

            .promo-value, .promo-min-order {
                color: #5a3d2b;
                margin: 0;
                display: flex;
                align-items: center;
                gap: 10px;
                font-size: 0.95rem;
            }

            .promo-value i, .promo-min-order i {
                color: #e9c46a;
                font-size: 1.1rem;
            }

            .promo-period {
                color: #666;
                font-size: 0.9rem;
                display: flex;
                align-items: center;
                gap: 10px;
                padding-top: 10px;
                border-top: 1px solid #e9c46a;
            }

            .promo-period i {
                color: #e9c46a;
            }

            @media (max-width: 768px) {
                .promotion-grid {
                    grid-template-columns: 1fr;
                    padding: 10px;
                }

                .service-card {
                    padding: 20px;
                }

                .promotion-details {
                    padding: 15px;
                }

                .promo-code-container {
                    flex-direction: column;
                    gap: 10px;
                    text-align: center;
                }
            }
        </style>
    </head>
    <body>
        <div class="header-top">
            <img src="picture/logo.jpg" alt="M·ªôc Nhi√™n Logo" class="logo">
            <div class="store-name">N·ªôi th·∫•t M·ªôc Nhi√™n</div>
        </div>
        <nav class="header-nav">
            <div class="nav-links">
                <a href="index.html" class="nav-btn active">Trang ch·ªß</a>
                <div class="dropdown">
                    <a href="products.html" class="nav-btn">S·∫£n ph·∫©m</a>
                    <div class="mega-menu">
                        <div class="mega-column">
                            <a href="products.html?category=Sofa">Sofa</a>
                            <a href="products.html?category=Gh·∫ø d√†i & ƒë√¥n">Gh·∫ø d√†i & ƒë√¥n</a>
                            <a href="products.html?category=B√†n n∆∞·ªõc">B√†n n∆∞·ªõc</a>
                            <a href="products.html?category=T·ªß tivi">T·ªß tivi</a>
                            <a href="products.html?category=K·ªá tr∆∞ng b√†y">K·ªá tr∆∞ng b√†y</a>
                            <a href="products.html?category=T·ªß gi√†y">T·ªß gi√†y</a>
                        </div>
                        <div class="mega-column">
                            <a href="products.html?category=B√†n ƒÉn">B√†n ƒÉn</a>
                            <a href="products.html?category=Gh·∫ø ƒÉn">Gh·∫ø ƒÉn</a>
                            <a href="products.html?category=Gh·∫ø Bar">Gh·∫ø Bar</a>
                            <a href="products.html?category=T·ªß ly">T·ªß ly</a>
                            <a href="products.html?category=T·ªß b·∫øp">T·ªß b·∫øp</a>
                        </div>
                        <div class="mega-column">
                            <a href="products.html?category=Gi∆∞·ªùng ng·ªß">Gi∆∞·ªùng ng·ªß</a>
                            <a href="products.html?category=B√†n ƒë·∫ßu gi∆∞·ªùng">B√†n ƒë·∫ßu gi∆∞·ªùng</a>
                            <a href="products.html?category=B√†n trang ƒëi·ªÉm">B√†n trang ƒëi·ªÉm</a>
                            <a href="products.html?category=T·ªß √°o">T·ªß √°o</a>
                            <a href="products.html?category=N·ªám">N·ªám</a>
                        </div>
                        <div class="mega-column">
                            <a href="products.html?category=B√†n l√†m vi·ªác">B√†n l√†m vi·ªác</a>
                            <a href="products.html?category=Gh·∫ø l√†m vi·ªác">Gh·∫ø l√†m vi·ªác</a>
                            <a href="products.html?category=K·ªá s√°ch">K·ªá s√°ch</a>
                            <a href="products.html?category=B√†n ngo√†i tr·ªùi">B√†n ngo√†i tr·ªùi</a>
                            <a href="products.html?category=Gh·∫ø ngo√†i tr·ªùi">Gh·∫ø ngo√†i tr·ªùi</a>
                        </div>
                        <div class="mega-column">
                            <a href="products.html?category=ƒê√®n trang tr√≠">ƒê√®n trang tr√≠</a>
                            <a href="products.html?category=Th·∫£m trang tr√≠">Th·∫£m trang tr√≠</a>
                            <a href="products.html?category=B√¨nh trang tr√≠">B√¨nh trang tr√≠</a>
                            <a href="products.html?category=Tranh">Tranh</a>
                            <a href="products.html?category=G∆∞∆°ng">G∆∞∆°ng</a>
                            <a href="products.html?category=ƒê·ªìng h·ªì">ƒê·ªìng h·ªì</a>
                            <a href="products.html?category=T∆∞·ª£ng trang tr√≠">T∆∞·ª£ng trang tr√≠</a>
                            <a href="products.html?category=D·ª•ng c·ª• b·∫øp">D·ª•ng c·ª• b·∫øp</a>
                        </div>
                    </div>
                </div>
                <a href="collection.html" class="nav-btn">B·ªô s∆∞u t·∫≠p</a>
                <a href="promotion.html" class="nav-btn">Khuy·∫øn m√£i</a>
                <a href="member.html" class="nav-btn">Th√†nh vi√™n</a>
                <a href="policy.html" class="nav-btn">Ch√≠nh s√°ch</a>
                <a href="about.html" class="nav-btn">V·ªÅ ch√∫ng t√¥i</a>
                <a href="cart.html" class="cart-btn">
                    <span class="cart-icon">üõí</span>
                    <span>Gi·ªè h√†ng</span>
                </a>
                <a href="#" class="login-btn" onclick="showModal('loginModal')">
                    <span>üë§</span>
                    <span>ƒêƒÉng nh·∫≠p</span>
                </a>
            </div>
        </nav>
        
        <main>
            <!-- Banner Khuy·∫øn m√£i -->
            <section class="promotion-banner">
                <div class="banner-content">
                    <h1>Khuy·∫øn m√£i ƒë·∫∑c bi·ªát</h1>
                    <p>Nh·ªØng ∆∞u ƒë√£i h·∫•p d·∫´n d√†nh ri√™ng cho b·∫°n</p>
                </div>
            </section>

            <!-- Danh m·ª•c khuy·∫øn m√£i -->
            <section class="promotion-categories">
                <div class="container">
                    <div class="category-tabs">
                        <button class="tab-btn active" data-category="all">T·∫•t c·∫£</button>
                        <button class="tab-btn" data-category="current">ƒêang di·ªÖn ra</button>
                        <button class="tab-btn" data-category="upcoming">S·∫Øp di·ªÖn ra</button>
                        <button class="tab-btn" data-category="ended">ƒê√£ k·∫øt th√∫c</button>
                    </div>
                </div>
            </section>

            <!-- Danh s√°ch khuy·∫øn m√£i -->
            <section class="promotion-list">
                <div class="container">
                    <div class="promotion-grid" id="promotionGrid">
                        <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c load ƒë·ªông t·ª´ Firebase -->
                    </div>
                </div>
            </section>

            <!-- Th√¥ng tin th√™m -->
            <section class="promotion-info">
                <div class="container">
                    <div class="info-grid">
                        <div class="info-card">
                            <div class="info-icon">üéÅ</div>
                            <h3>∆Øu ƒë√£i ƒë·ªôc quy·ªÅn</h3>
                            <p>Nh·∫≠n th√¥ng b√°o s·ªõm nh·∫•t v·ªÅ c√°c ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i ƒë·∫∑c bi·ªát</p>
                        </div>
                        <div class="info-card">
                            <div class="info-icon">üíé</div>
                            <h3>Th√†nh vi√™n VIP</h3>
                            <p>H∆∞·ªüng th√™m nhi·ªÅu ∆∞u ƒë√£i ƒë·∫∑c bi·ªát d√†nh ri√™ng cho th√†nh vi√™n</p>
                        </div>
                        <div class="info-card">
                            <div class="info-icon">üì±</div>
                            <h3>Th√¥ng b√°o qua SMS</h3>
                            <p>Nh·∫≠n th√¥ng b√°o khuy·∫øn m√£i qua SMS ƒë·ªÉ kh√¥ng b·ªè l·ª° c∆° h·ªôi</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <script>
            // Th√™m h√†m x·ª≠ l√Ω tab
            function handleTabClick(event) {
                const tabs = document.querySelectorAll('.tab-btn');
                tabs.forEach(tab => tab.classList.remove('active'));
                event.target.classList.add('active');
                
                const category = event.target.dataset.category;
                filterPromotions(category);
            }

            // Th√™m event listeners cho c√°c tab
            document.querySelectorAll('.tab-btn').forEach(tab => {
                tab.addEventListener('click', handleTabClick);
            });

            // H√†m l·ªçc khuy·∫øn m√£i theo danh m·ª•c
            function filterPromotions(category) {
                const now = new Date();
                const promotions = document.querySelectorAll('.service-card');
                
                promotions.forEach(promotion => {
                    const startDate = new Date(promotion.dataset.startDate);
                    const endDate = new Date(promotion.dataset.endDate);
                    
                    switch(category) {
                        case 'current':
                            promotion.style.display = (now >= startDate && now <= endDate) ? 'block' : 'none';
                            break;
                        case 'upcoming':
                            promotion.style.display = (now < startDate) ? 'block' : 'none';
                            break;
                        case 'ended':
                            promotion.style.display = (now > endDate) ? 'block' : 'none';
                            break;
                        default:
                            promotion.style.display = 'block';
                    }
                });
            }

            // C·∫≠p nh·∫≠t h√†m loadPromotions
            function loadPromotions() {
                const serviceGrid = document.getElementById('promotionGrid');
                if (!serviceGrid) {
                    console.warn('Promotion grid container not found');
                    return;
                }
                
                // L·∫Øng nghe thay ƒë·ªïi theo th·ªùi gian th·ª±c
                database.ref('promotions')
                    .orderByChild('status')
                    .equalTo('active')
                    .on('value', (snapshot) => {
                        const promotions = [];
                        snapshot.forEach((childSnapshot) => {
                            promotions.push({
                                id: childSnapshot.key,
                                ...childSnapshot.val()
                            });
                        });
                        
                        // S·∫Øp x·∫øp khuy·∫øn m√£i theo th·ªùi gian b·∫Øt ƒë·∫ßu
                        promotions.sort((a, b) => new Date(a.startDate) - new Date(b.startDate));
                        
                        // X√≥a n·ªôi dung c≈©
                        serviceGrid.innerHTML = '';
                        
                        if (promotions.length === 0) {
                            serviceGrid.innerHTML = `
                                <div class="service-card">
                                    <div class="service-icon">üéÅ</div>
                                    <h3>Hi·ªán kh√¥ng c√≥ khuy·∫øn m√£i</h3>
                                    <p>Vui l√≤ng quay l·∫°i sau ƒë·ªÉ xem c√°c ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i m·ªõi.</p>
                                </div>
                            `;
                            return;
                        }
                        
                        // Hi·ªÉn th·ªã t·ª´ng ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i
                        promotions.forEach(promotion => {
                            const serviceCard = document.createElement('div');
                            serviceCard.className = 'service-card';
                            serviceCard.dataset.startDate = promotion.startDate;
                            serviceCard.dataset.endDate = promotion.endDate;
                            
                            // Format gi√° ti·ªÅn
                            const formatPrice = (price) => {
                                return new Intl.NumberFormat('vi-VN', {
                                    style: 'currency',
                                    currency: 'VND'
                                }).format(price);
                            };

                            // Format ng√†y th√°ng
                            const formatDate = (dateString) => {
                                const date = new Date(dateString);
                                return date.toLocaleDateString('vi-VN', {
                                    day: '2-digit',
                                    month: '2-digit',
                                    year: 'numeric'
                                });
                            };

                            // Ki·ªÉm tra tr·∫°ng th√°i khuy·∫øn m√£i
                            const now = new Date();
                            const startDate = new Date(promotion.startDate);
                            const endDate = new Date(promotion.endDate);
                            let statusClass = '';
                            let statusText = '';

                            if (now < startDate) {
                                statusClass = 'upcoming';
                                statusText = 'S·∫Øp di·ªÖn ra';
                            } else if (now > endDate) {
                                statusClass = 'ended';
                                statusText = 'ƒê√£ k·∫øt th√∫c';
                            } else {
                                statusClass = 'current';
                                statusText = 'ƒêang di·ªÖn ra';
                            }
                            
                            serviceCard.innerHTML = `
                                <div class="promotion-status ${statusClass}">${statusText}</div>
                                <div class="service-icon">${promotion.icon || 'üéÅ'}</div>
                                <h3>${promotion.title}</h3>
                                <p>${promotion.description}</p>
                                <div class="promotion-details">
                                    <div class="promo-code-container">
                                        <p class="promo-code">M√£ khuy·∫øn m√£i: <strong>${promotion.promoCode}</strong></p>
                                        <button class="copy-btn" onclick="copyPromoCode('${promotion.promoCode}')">
                                            <i class="fas fa-copy"></i> Sao ch√©p
                                        </button>
                                    </div>
                                    <div class="promo-values">
                                        <p class="promo-value">
                                            <i class="fas fa-gift"></i>
                                            Gi√° tr·ªã voucher: <strong>${formatPrice(promotion.voucherAmount)}</strong>
                                        </p>
                                        <p class="promo-min-order">
                                            <i class="fas fa-shopping-cart"></i>
                                            √Åp d·ª•ng cho ƒë∆°n h√†ng t·ª´: <strong>${formatPrice(promotion.minOrderValue)}</strong>
                                        </p>
                                    </div>
                                    <div class="promo-period">
                                        <i class="fas fa-clock"></i>
                                        <span>Th·ªùi gian: ${formatDate(promotion.startDate)} - ${formatDate(promotion.endDate)}</span>
                                    </div>
                                </div>
                            `;
                            
                            serviceGrid.appendChild(serviceCard);
                        });

                        // L·ªçc khuy·∫øn m√£i theo tab m·∫∑c ƒë·ªãnh
                        filterPromotions('all');
                    }, (error) => {
                        console.error('L·ªói khi load khuy·∫øn m√£i:', error);
                        if (serviceGrid) {
                            serviceGrid.innerHTML = `
                                <div class="service-card">
                                    <div class="service-icon">‚ö†Ô∏è</div>
                                    <h3>Kh√¥ng th·ªÉ t·∫£i khuy·∫øn m√£i</h3>
                                    <p>Vui l√≤ng th·ª≠ l·∫°i sau ho·∫∑c li√™n h·ªá h·ªó tr·ª£ n·∫øu v·∫•n ƒë·ªÅ v·∫´n ti·∫øp t·ª•c.</p>
                                </div>
                            `;
                        }
                    });
            }

            // Th√™m CSS cho ph·∫ßn hi·ªÉn th·ªã khuy·∫øn m√£i
            const promotionStyles = document.createElement('style');
            promotionStyles.textContent = `
                .service-card {
                    position: relative;
                    text-align: center;
                    padding: 30px;
                    background: #fff;
                    border-radius: 12px;
                    transition: all 0.3s;
                    border: 1px solid #e9c46a;
                    overflow: hidden;
                }

                .service-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 5px 15px rgba(90, 61, 43, 0.1);
                }

                .promotion-status {
                    position: absolute;
                    top: 15px;
                    right: 15px;
                    padding: 5px 15px;
                    border-radius: 20px;
                    font-size: 0.8rem;
                    font-weight: 600;
                }

                .promotion-status.current {
                    background: #4CAF50;
                    color: white;
                }

                .promotion-status.upcoming {
                    background: #2196F3;
                    color: white;
                }

                .promotion-status.ended {
                    background: #9E9E9E;
                    color: white;
                }

                .service-icon {
                    font-size: 3rem;
                    margin-bottom: 20px;
                }

                .service-card h3 {
                    color: #5a3d2b;
                    margin-bottom: 15px;
                    font-size: 1.3rem;
                }

                .service-card p {
                    color: #666;
                    margin-bottom: 15px;
                    line-height: 1.5;
                }

                .promotion-details {
                    background: #f9f7f3;
                    padding: 20px;
                    border-radius: 8px;
                    margin: 15px 0;
                    text-align: left;
                }

                .promo-code-container {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    background: #fff;
                    padding: 10px 15px;
                    border-radius: 6px;
                    margin-bottom: 15px;
                }

                .promo-code {
                    color: #e9c46a;
                    font-size: 1.1rem;
                    margin: 0;
                }

                .copy-btn {
                    background: none;
                    border: none;
                    color: #5a3d2b;
                    cursor: pointer;
                    padding: 5px;
                    transition: all 0.3s;
                }

                .copy-btn:hover {
                    color: #e9c46a;
                }

                .promo-values {
                    display: grid;
                    gap: 10px;
                    margin-bottom: 15px;
                }

                .promo-value, .promo-min-order {
                    color: #5a3d2b;
                    margin: 0;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .promo-value i, .promo-min-order i {
                    color: #e9c46a;
                }

                .promo-period {
                    color: #666;
                    font-size: 0.9rem;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    padding-top: 10px;
                    border-top: 1px solid #e9c46a;
                }

                .promo-period i {
                    color: #e9c46a;
                }

                @media (max-width: 768px) {
                    .service-card {
                        padding: 20px;
                    }

                    .promotion-details {
                        padding: 15px;
                    }

                    .promo-code-container {
                        flex-direction: column;
                        gap: 10px;
                    }
                }
            `;
            document.head.appendChild(promotionStyles);

            // C·∫≠p nh·∫≠t h√†m saveUserData
            async function saveUserData(user, additionalData = {}) {
                if (!user) return false;

                const userData = {
                    email: user.email || '',
                    emailVerified: user.emailVerified || false,
                    displayName: user.displayName || additionalData.fullName || '',
                    lastLogin: new Date().toISOString(),
                    role: 'user',  // M·∫∑c ƒë·ªãnh role l√† user
                    ...additionalData
                };

                try {
                    // Ki·ªÉm tra v√† t·∫°o reference ƒë·∫øn node user
                    const userRef = database.ref('users/' + user.uid);
                    
                    // L·∫•y d·ªØ li·ªáu hi·ªán t·∫°i c·ªßa user (n·∫øu c√≥)
                    const snapshot = await userRef.once('value');
                    const currentData = snapshot.val() || {};

                    // G·ªôp d·ªØ li·ªáu m·ªõi v·ªõi d·ªØ li·ªáu hi·ªán t·∫°i
                    const updatedData = {
                        ...currentData,
                        ...userData,
                        // Gi·ªØ l·∫°i createdAt n·∫øu ƒë√£ t·ªìn t·∫°i, n·∫øu kh√¥ng th√¨ t·∫°o m·ªõi
                        createdAt: currentData.createdAt || new Date().toISOString()
                    };

                    // C·∫≠p nh·∫≠t d·ªØ li·ªáu
                    await userRef.set(updatedData);
                    return true;
                } catch (error) {
                    console.error('Error saving user data:', error);
                    if (error.code === 'PERMISSION_DENIED') {
                        showError('L·ªói ph√¢n quy·ªÅn', 'Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t th√¥ng tin. Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i.');
                    } else {
                        showError('L·ªói c·∫≠p nh·∫≠t', 'Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t th√¥ng tin ng∆∞·ªùi d√πng. Vui l√≤ng th·ª≠ l·∫°i sau.');
                    }
                    return false;
                }
            }

            // C·∫≠p nh·∫≠t h√†m updateLoginStatus
            async function updateLoginStatus(user, status) {
                if (!user) return false;

                try {
                    const statusData = {
                        status: status,
                        timestamp: new Date().toISOString()
                    };

                    // C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
                    await database.ref(`users/${user.uid}/loginStatus`).set(statusData);
                    return true;
                } catch (error) {
                    console.error('Error updating login status:', error);
                    // Ch·ªâ hi·ªÉn th·ªã l·ªói n·∫øu kh√¥ng ph·∫£i l√† PERMISSION_DENIED
                    if (error.code !== 'PERMISSION_DENIED') {
                        showError('L·ªói c·∫≠p nh·∫≠t', 'Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i ƒëƒÉng nh·∫≠p.');
                    }
                    return false;
                }
            }

            // C·∫≠p nh·∫≠t x·ª≠ l√Ω ƒëƒÉng nh·∫≠p
            async function handleLogin(event) {
                event.preventDefault();
                const button = event.target.querySelector('button');
                const email = event.target.querySelector('input[type="email"]').value;
                const password = event.target.querySelector('input[type="password"]').value;
                
                button.disabled = true;
                
                try {
                    const userCredential = await auth.signInWithEmailAndPassword(email, password);
                    const user = userCredential.user;
                    
                    const [savedData, updatedStatus] = await Promise.all([
                        saveUserData(user),
                        updateLoginStatus(user, 'online')
                    ]);

                    if (savedData && updatedStatus) {
                        showSuccess('ƒêƒÉng nh·∫≠p th√†nh c√¥ng', 'Ch√†o m·ª´ng b·∫°n ƒë√£ quay tr·ªü l·∫°i!');
                        document.getElementById('modalOverlay').style.display = 'none';
                        document.querySelectorAll('.modal').forEach(modal => {
                            modal.classList.remove('active');
                        });
                    }
                } catch (error) {
                    console.error('L·ªói ƒëƒÉng nh·∫≠p:', error);
                    let errorMessage = 'ƒê√£ c√≥ l·ªói x·∫£y ra';
                    switch (error.code) {
                        case 'auth/invalid-email':
                            errorMessage = 'Email kh√¥ng h·ª£p l·ªá';
                            break;
                        case 'auth/user-disabled':
                            errorMessage = 'T√†i kho·∫£n ƒë√£ b·ªã v√¥ hi·ªáu h√≥a';
                            break;
                        case 'auth/user-not-found':
                            errorMessage = 'Kh√¥ng t√¨m th·∫•y t√†i kho·∫£n v·ªõi email n√†y';
                            break;
                        case 'auth/wrong-password':
                            errorMessage = 'M·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c';
                            break;
                    }
                    showError('ƒêƒÉng nh·∫≠p th·∫•t b·∫°i', errorMessage);
                } finally {
                    button.disabled = false;
                }
            }

            // C·∫≠p nh·∫≠t x·ª≠ l√Ω ƒëƒÉng k√Ω
            async function handleRegister(event) {
                event.preventDefault();
                const form = event.target;
                const button = form.querySelector('button');
                const fullName = form.querySelector('input[type="text"]').value;
                const email = form.querySelector('input[type="email"]').value;
                const password = form.querySelectorAll('input[type="password"]')[0].value;
                const confirmPassword = form.querySelectorAll('input[type="password"]')[1].value;

                if (password !== confirmPassword) {
                    showError('L·ªói x√°c nh·∫≠n', 'M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!');
                    return;
                }

                if (password.length < 6) {
                    showError('L·ªói m·∫≠t kh·∫©u', 'M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±!');
                    return;
                }

                button.disabled = true;

                try {
                    // T·∫°o t√†i kho·∫£n
                    const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                    const user = userCredential.user;

                    // L∆∞u th√¥ng tin b·ªï sung
                    const success = await saveUserData(user, {
                        fullName,
                        accountType: 'email',
                        status: 'active'
                    });

                    if (success) {
                        showSuccess('ƒêƒÉng k√Ω th√†nh c√¥ng', 'Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c!');
                        // Reset form
                        form.reset();
                        showModal('loginModal');
                    }
                } catch (error) {
                    console.error('L·ªói ƒëƒÉng k√Ω:', error);
                    let errorMessage = 'ƒê√£ c√≥ l·ªói x·∫£y ra';
                    switch (error.code) {
                        case 'auth/email-already-in-use':
                            errorMessage = 'Email n√†y ƒë√£ ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi t√†i kho·∫£n kh√°c';
                            break;
                        case 'auth/invalid-email':
                            errorMessage = 'Email kh√¥ng h·ª£p l·ªá';
                            break;
                        case 'auth/operation-not-allowed':
                            errorMessage = 'T√≠nh nƒÉng ƒëƒÉng k√Ω t·∫°m th·ªùi kh√¥ng kh·∫£ d·ª•ng';
                            break;
                        case 'auth/weak-password':
                            errorMessage = 'M·∫≠t kh·∫©u kh√¥ng ƒë·ªß m·∫°nh';
                            break;
                    }
                    showError('ƒêƒÉng k√Ω th·∫•t b·∫°i', errorMessage);
                } finally {
                    button.disabled = false;
                }
            }

            // X·ª≠ l√Ω qu√™n m·∫≠t kh·∫©u
            function handleForgotPassword(event) {
                event.preventDefault();
                const button = event.target.querySelector('button');
                const email = event.target.querySelector('input[type="email"]').value;
                
                button.disabled = true;
                
                auth.sendPasswordResetEmail(email)
                    .then(() => {
                        showSuccess('G·ª≠i email th√†nh c√¥ng', 'Vui l√≤ng ki·ªÉm tra h·ªôp th∆∞ c·ªßa b·∫°n ƒë·ªÉ ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u.');
                        showModal('loginModal');
                    })
                    .catch((error) => {
                        console.error('L·ªói g·ª≠i email:', error);
                        let errorMessage = 'ƒê√£ c√≥ l·ªói x·∫£y ra';
                        switch (error.code) {
                            case 'auth/invalid-email':
                                errorMessage = 'Email kh√¥ng h·ª£p l·ªá';
                                break;
                            case 'auth/user-not-found':
                                errorMessage = 'Kh√¥ng t√¨m th·∫•y t√†i kho·∫£n v·ªõi email n√†y';
                                break;
                        }
                        showError('G·ª≠i email th·∫•t b·∫°i', errorMessage);
                    })
                    .finally(() => {
                        button.disabled = false;
                    });
            }

            // Ki·ªÉm tra tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
            auth.onAuthStateChanged((user) => {
                const loginBtn = document.querySelector('.login-btn');
                if (user) {
                    updateLoginStatus(user, 'online');
                    
                    loginBtn.innerHTML = `
                        <span>üë§</span>
                        <span>${user.email}</span>
                    `;
                    loginBtn.onclick = () => {
                        showConfirm('ƒêƒÉng xu·∫•t', 'B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒëƒÉng xu·∫•t?')
                            .then((result) => {
                                if (result.isConfirmed) {
                                    updateLoginStatus(user, 'offline').then(() => {
                                        auth.signOut();
                                    });
                                }
                            });
                    };

                    window.addEventListener('beforeunload', () => {
                        updateLoginStatus(user, 'offline');
                    });
                } else {
                    loginBtn.innerHTML = `
                        <span>üë§</span>
                        <span>ƒêƒÉng nh·∫≠p</span>
                    `;
                    loginBtn.onclick = () => showModal('loginModal');
                }
            });

            // Ki·ªÉm tra ƒëƒÉng nh·∫≠p v√† ƒëi·ªÅn th√¥ng tin v√†o form li√™n h·ªá
            auth.onAuthStateChanged((user) => {
                if (user) {
                    // Load th√¥ng tin user t·ª´ database
                    database.ref('users/' + user.uid).once('value')
                        .then((snapshot) => {
                            const userData = snapshot.val();
                            if (userData) {
                                document.getElementById('contactName').value = userData.displayName || '';
                                document.getElementById('contactEmail').value = user.email;
                                document.getElementById('contactPhone').value = userData.phone || '';
                            }
                        })
                        .catch((error) => {
                            console.error('L·ªói khi load th√¥ng tin user:', error);
                        });
                }
            });

            // H√†m g·ª≠i th√¥ng tin li√™n h·ªá
            function submitContact(event) {
                event.preventDefault();
                
                const user = auth.currentUser;
                const contactData = {
                    name: document.getElementById('contactName').value.trim(),
                    email: document.getElementById('contactEmail').value.trim(),
                    phone: document.getElementById('contactPhone').value.trim(),
                    subject: document.getElementById('contactSubject').value.trim(),
                    message: document.getElementById('contactMessage').value.trim(),
                    createdAt: firebase.database.ServerValue.TIMESTAMP,
                    status: 'pending'
                };

                // Validate d·ªØ li·ªáu
                if (!contactData.name || !contactData.email || !contactData.phone || !contactData.subject || !contactData.message) {
                    Swal.fire('L·ªói', 'Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin', 'error');
                    return;
                }

                // Validate email
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(contactData.email)) {
                    Swal.fire('L·ªói', 'Email kh√¥ng h·ª£p l·ªá', 'error');
                    return;
                }

                // Validate phone
                const phoneRegex = /^[0-9]{10,11}$/;
                if (!phoneRegex.test(contactData.phone)) {
                    Swal.fire('L·ªói', 'S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá', 'error');
                    return;
                }

                // Show loading
                Swal.fire({
                    title: 'ƒêang g·ª≠i...',
                    allowOutsideClick: false,
                    didOpen: () => {
                        Swal.showLoading();
                    }
                });

                // Ki·ªÉm tra ƒëƒÉng nh·∫≠p tr∆∞·ªõc khi g·ª≠i
                if (!user) {
                    Swal.fire({
                        title: 'Vui l√≤ng ƒëƒÉng nh·∫≠p',
                        text: 'B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ g·ª≠i th√¥ng tin li√™n h·ªá',
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonText: 'ƒêƒÉng nh·∫≠p',
                        cancelButtonText: 'H·ªßy'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            showModal('loginModal');
                        }
                    });
                    return;
                }

                // L∆∞u th√¥ng tin li√™n h·ªá v√†o Firebase
                const contactRef = database.ref('contacts').push();
                contactData.userId = user.uid;
                
                contactRef.set(contactData)
                    .then(() => {
                        Swal.fire({
                            title: 'Th√†nh c√¥ng',
                            text: 'C·∫£m ∆°n b·∫°n ƒë√£ li√™n h·ªá. Ch√∫ng t√¥i s·∫Ω ph·∫£n h·ªìi s·ªõm nh·∫•t c√≥ th·ªÉ.',
                            icon: 'success',
                            confirmButtonText: 'OK'
                        }).then(() => {
                            // Reset form
                            document.getElementById('contactForm').reset();
                            // Gi·ªØ l·∫°i th√¥ng tin c√° nh√¢n
                            database.ref('users/' + user.uid).once('value')
                                .then((snapshot) => {
                                    const userData = snapshot.val();
                                    if (userData) {
                                        document.getElementById('contactName').value = userData.displayName || '';
                                        document.getElementById('contactEmail').value = user.email;
                                        document.getElementById('contactPhone').value = userData.phone || '';
                                    }
                                });
                        });
                    })
                    .catch((error) => {
                        console.error('L·ªói khi g·ª≠i th√¥ng tin li√™n h·ªá:', error);
                        let errorMessage = 'Kh√¥ng th·ªÉ g·ª≠i th√¥ng tin li√™n h·ªá. Vui l√≤ng th·ª≠ l·∫°i sau.';
                        
                        if (error.code === 'PERMISSION_DENIED') {
                            errorMessage = 'B·∫°n kh√¥ng c√≥ quy·ªÅn g·ª≠i th√¥ng tin li√™n h·ªá. Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i.';
                            // T·ª± ƒë·ªông ƒëƒÉng xu·∫•t n·∫øu c√≥ l·ªói permission
                            auth.signOut().then(() => {
                                showModal('loginModal');
                            });
                        }
                        
                        Swal.fire({
                            title: 'L·ªói',
                            text: errorMessage,
                            icon: 'error',
                            confirmButtonText: 'OK'
                        });
                    });
            }

            // H√†m ƒë·ªÉ load v√† hi·ªÉn th·ªã ƒë√°nh gi√° t·ª´ Firebase
            function loadTestimonials() {
                const testimonialContainer = document.getElementById('testimonialContainer');
                
                // L·∫Øng nghe thay ƒë·ªïi theo th·ªùi gian th·ª±c
                database.ref('contacts')
                    .orderByChild('createdAt')
                    .limitToLast(5)
                    .on('value', (snapshot) => {
                        const testimonials = [];
                        snapshot.forEach((childSnapshot) => {
                            testimonials.push({
                                id: childSnapshot.key,
                                ...childSnapshot.val()
                            });
                        });
                        
                        // ƒê·∫£o ng∆∞·ª£c m·∫£ng ƒë·ªÉ hi·ªÉn th·ªã m·ªõi nh·∫•t l√™n ƒë·∫ßu
                        testimonials.reverse();
                        
                        // X√≥a n·ªôi dung c≈©
                        testimonialContainer.innerHTML = '';
                        
                        // Hi·ªÉn th·ªã t·ª´ng ƒë√°nh gi√°
                        testimonials.forEach(testimonial => {
                            const testimonialCard = document.createElement('div');
                            testimonialCard.className = 'testimonial-card';
                            
                            // Format ng√†y th√°ng
                            const date = new Date(testimonial.createdAt);
                            const formattedDate = date.toLocaleDateString('vi-VN', {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric'
                            });
                            
                            testimonialCard.innerHTML = `
                                <div class="testimonial-content">
                                    <p>"${testimonial.message}"</p>
                                </div>
                                <div class="testimonial-author">
                                    <div class="author-info">
                                        <h4>${testimonial.name}</h4>
                                        <p>${formattedDate}</p>
                                    </div>
                                </div>
                            `;
                            
                            testimonialContainer.appendChild(testimonialCard);
                        });
                    }, (error) => {
                        console.error('L·ªói khi load ƒë√°nh gi√°:', error);
                        testimonialContainer.innerHTML = `
                            <div class="testimonial-card">
                                <div class="testimonial-content">
                                    <p>Kh√¥ng th·ªÉ t·∫£i ƒë√°nh gi√°. Vui l√≤ng th·ª≠ l·∫°i sau.</p>
                                </div>
                            </div>
                        `;
                    });
            }

            // H√†m ƒë·ªÉ load v√† hi·ªÉn th·ªã s·∫£n ph·∫©m n·ªïi b·∫≠t t·ª´ Firebase
            function loadFeaturedProducts() {
                const productsContainer = document.getElementById('featuredProductsContainer');
                
                // L·∫Øng nghe thay ƒë·ªïi theo th·ªùi gian th·ª±c
                database.ref('products')
                    .orderByChild('ngayThem')
                    .limitToLast(6) // Hi·ªÉn th·ªã 6 s·∫£n ph·∫©m m·ªõi nh·∫•t
                    .on('value', (snapshot) => {
                        const products = [];
                        snapshot.forEach((childSnapshot) => {
                            products.push({
                                id: childSnapshot.key,
                                ...childSnapshot.val()
                            });
                        });
                        
                        // ƒê·∫£o ng∆∞·ª£c m·∫£ng ƒë·ªÉ hi·ªÉn th·ªã m·ªõi nh·∫•t l√™n ƒë·∫ßu
                        products.reverse();
                        
                        // X√≥a n·ªôi dung c≈©
                        productsContainer.innerHTML = '';
                        
                        // Hi·ªÉn th·ªã t·ª´ng s·∫£n ph·∫©m
                        products.forEach(product => {
                            const productCard = document.createElement('div');
                            productCard.className = 'product-card';
                            
                            // T√≠nh ph·∫ßn trƒÉm gi·∫£m gi√°
                            const discountPercentage = product.giaSauGiam ? 
                                Math.round(((product.giaBan - product.giaSauGiam) / product.giaBan) * 100) : 0;
                            
                            // Format gi√° ti·ªÅn
                            const formatPrice = (price) => {
                                return new Intl.NumberFormat('vi-VN', {
                                    style: 'currency',
                                    currency: 'VND'
                                }).format(price);
                            };

                            productCard.innerHTML = `
                                ${discountPercentage > 0 ? `<div class="product-badge">-${discountPercentage}%</div>` : ''}
                                <img src="${product.hinhAnh}" alt="${product.tenSanPham}" class="product-image" 
                                    onerror="this.src='picture/logo.jpg'">
                                <div class="product-info">
                                    <h3>${product.tenSanPham}</h3>
                                    <p class="product-desc">${product.moTa}</p>
                                    <div class="product-price">
                                        ${product.giaSauGiam ? 
                                            `<span class="original-price">${formatPrice(product.giaBan)}</span>
                                             <span class="discounted-price">${formatPrice(product.giaSauGiam)}</span>` :
                                            `<span class="current-price">${formatPrice(product.giaBan)}</span>`
                                        }
                                    </div>
                                    <div class="product-actions">
                                        <button class="btn-primary" onclick="addToCart('${product.id}')">Mua ngay</button>
                                        <button class="btn-secondary" onclick="viewProductDetail('${product.id}')">Chi ti·∫øt</button>
                                    </div>
                                </div>
                            `;
                            
                            productsContainer.appendChild(productCard);
                        });
                    }, (error) => {
                        console.error('L·ªói khi load s·∫£n ph·∫©m:', error);
                        productsContainer.innerHTML = `
                            <div class="product-card">
                                <div class="product-info">
                                    <p>Kh√¥ng th·ªÉ t·∫£i s·∫£n ph·∫©m. Vui l√≤ng th·ª≠ l·∫°i sau.</p>
                                </div>
                            </div>
                        `;
                    });
            }

            // H√†m th√™m v√†o gi·ªè h√†ng
            function addToCart(productId) {
                const user = auth.currentUser;
                if (!user) {
                    showConfirm('Vui l√≤ng ƒëƒÉng nh·∫≠p', 'B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng')
                        .then((result) => {
                            if (result.isConfirmed) {
                                showModal('loginModal');
                            }
                        });
                    return;
                }

                // Th√™m v√†o gi·ªè h√†ng logic s·∫Ω ƒë∆∞·ª£c implement sau
                showSuccess('Th√†nh c√¥ng', 'S·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c th√™m v√†o gi·ªè h√†ng');
            }

            // H√†m xem chi ti·∫øt s·∫£n ph·∫©m
            function viewProductDetail(productId) {
                // L∆∞u ID s·∫£n ph·∫©m v√†o localStorage ƒë·ªÉ s·ª≠ d·ª•ng ·ªü trang chi ti·∫øt
                localStorage.setItem('selectedProductId', productId);
                // Chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang chi ti·∫øt
                window.location.href = `product-detail.html?id=${productId}`;
            }

            // H√†m load v√† hi·ªÉn th·ªã ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i
            function loadPromotions() {
                const serviceGrid = document.getElementById('promotionGrid');
                if (!serviceGrid) {
                    console.warn('Promotion grid container not found');
                    return;
                }
                
                // L·∫Øng nghe thay ƒë·ªïi theo th·ªùi gian th·ª±c
                database.ref('promotions')
                    .orderByChild('status')
                    .equalTo('active')
                    .on('value', (snapshot) => {
                        const promotions = [];
                        snapshot.forEach((childSnapshot) => {
                            promotions.push({
                                id: childSnapshot.key,
                                ...childSnapshot.val()
                            });
                        });
                        
                        // S·∫Øp x·∫øp khuy·∫øn m√£i theo th·ªùi gian b·∫Øt ƒë·∫ßu
                        promotions.sort((a, b) => new Date(a.startDate) - new Date(b.startDate));
                        
                        // X√≥a n·ªôi dung c≈©
                        serviceGrid.innerHTML = '';
                        
                        if (promotions.length === 0) {
                            serviceGrid.innerHTML = `
                                <div class="service-card">
                                    <div class="service-icon">üéÅ</div>
                                    <h3>Hi·ªán kh√¥ng c√≥ khuy·∫øn m√£i</h3>
                                    <p>Vui l√≤ng quay l·∫°i sau ƒë·ªÉ xem c√°c ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i m·ªõi.</p>
                                </div>
                            `;
                            return;
                        }
                        
                        // Hi·ªÉn th·ªã t·ª´ng ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i
                        promotions.forEach(promotion => {
                            const serviceCard = document.createElement('div');
                            serviceCard.className = 'service-card';
                            serviceCard.dataset.startDate = promotion.startDate;
                            serviceCard.dataset.endDate = promotion.endDate;
                            
                            // Format gi√° ti·ªÅn
                            const formatPrice = (price) => {
                                return new Intl.NumberFormat('vi-VN', {
                                    style: 'currency',
                                    currency: 'VND'
                                }).format(price);
                            };

                            // Format ng√†y th√°ng
                            const formatDate = (dateString) => {
                                const date = new Date(dateString);
                                return date.toLocaleDateString('vi-VN', {
                                    day: '2-digit',
                                    month: '2-digit',
                                    year: 'numeric'
                                });
                            };

                            // Ki·ªÉm tra tr·∫°ng th√°i khuy·∫øn m√£i
                            const now = new Date();
                            const startDate = new Date(promotion.startDate);
                            const endDate = new Date(promotion.endDate);
                            let statusClass = '';
                            let statusText = '';

                            if (now < startDate) {
                                statusClass = 'upcoming';
                                statusText = 'S·∫Øp di·ªÖn ra';
                            } else if (now > endDate) {
                                statusClass = 'ended';
                                statusText = 'ƒê√£ k·∫øt th√∫c';
                            } else {
                                statusClass = 'current';
                                statusText = 'ƒêang di·ªÖn ra';
                            }
                            
                            serviceCard.innerHTML = `
                                <div class="promotion-status ${statusClass}">${statusText}</div>
                                <div class="service-icon">${promotion.icon || 'üéÅ'}</div>
                                <h3>${promotion.title}</h3>
                                <p>${promotion.description}</p>
                                <div class="promotion-details">
                                    <div class="promo-code-container">
                                        <p class="promo-code">M√£ khuy·∫øn m√£i: <strong>${promotion.promoCode}</strong></p>
                                        <button class="copy-btn" onclick="copyPromoCode('${promotion.promoCode}')">
                                            <i class="fas fa-copy"></i> Sao ch√©p
                                        </button>
                                    </div>
                                    <div class="promo-values">
                                        <p class="promo-value">
                                            <i class="fas fa-gift"></i>
                                            Gi√° tr·ªã voucher: <strong>${formatPrice(promotion.voucherAmount)}</strong>
                                        </p>
                                        <p class="promo-min-order">
                                            <i class="fas fa-shopping-cart"></i>
                                            √Åp d·ª•ng cho ƒë∆°n h√†ng t·ª´: <strong>${formatPrice(promotion.minOrderValue)}</strong>
                                        </p>
                                    </div>
                                    <div class="promo-period">
                                        <i class="fas fa-clock"></i>
                                        <span>Th·ªùi gian: ${formatDate(promotion.startDate)} - ${formatDate(promotion.endDate)}</span>
                                    </div>
                                </div>
                            `;
                            
                            serviceGrid.appendChild(serviceCard);
                        });

                        // L·ªçc khuy·∫øn m√£i theo tab m·∫∑c ƒë·ªãnh
                        filterPromotions('all');
                    }, (error) => {
                        console.error('L·ªói khi load khuy·∫øn m√£i:', error);
                        if (serviceGrid) {
                            serviceGrid.innerHTML = `
                                <div class="service-card">
                                    <div class="service-icon">‚ö†Ô∏è</div>
                                    <h3>Kh√¥ng th·ªÉ t·∫£i khuy·∫øn m√£i</h3>
                                    <p>Vui l√≤ng th·ª≠ l·∫°i sau ho·∫∑c li√™n h·ªá h·ªó tr·ª£ n·∫øu v·∫•n ƒë·ªÅ v·∫´n ti·∫øp t·ª•c.</p>
                                </div>
                            `;
                        }
                    });
            }

            // H√†m sao ch√©p m√£ khuy·∫øn m√£i
            function copyPromoCode(code) {
                navigator.clipboard.writeText(code).then(() => {
                    showSuccess('Th√†nh c√¥ng', 'ƒê√£ sao ch√©p m√£ khuy·∫øn m√£i v√†o clipboard!');
                }).catch(() => {
                    showError('L·ªói', 'Kh√¥ng th·ªÉ sao ch√©p m√£ khuy·∫øn m√£i. Vui l√≤ng th·ª≠ l·∫°i.');
                });
            }

            // H√†m load v√† hi·ªÉn th·ªã s·∫£n ph·∫©m khuy·∫øn m√£i
            function loadPromotionProducts() {
                const productsContainer = document.getElementById('promotionProductsContainer');
                
                // L·∫Øng nghe thay ƒë·ªïi theo th·ªùi gian th·ª±c
                database.ref('promotion_products')
                    .orderByChild('status')
                    .equalTo('active')
                    .on('value', (snapshot) => {
                        const products = [];
                        snapshot.forEach((childSnapshot) => {
                            products.push({
                                id: childSnapshot.key,
                                ...childSnapshot.val()
                            });
                        });
                        
                        // X√≥a n·ªôi dung c≈©
                        productsContainer.innerHTML = '';
                        
                        // Hi·ªÉn th·ªã t·ª´ng s·∫£n ph·∫©m
                        products.forEach(product => {
                            const productCard = document.createElement('div');
                            productCard.className = 'product-card';
                            
                            // Format gi√° ti·ªÅn
                            const formatPrice = (price) => {
                                return new Intl.NumberFormat('vi-VN', {
                                    style: 'currency',
                                    currency: 'VND'
                                }).format(price);
                            };

                            productCard.innerHTML = `
                                <div class="product-badge">-${product.discountPercentage}%</div>
                                <img src="${product.image}" alt="${product.name}" class="product-image" 
                                    onerror="this.src='picture/logo.jpg'">
                                <div class="product-info">
                                    <h3>${product.name}</h3>
                                    <p class="product-desc">${product.description}</p>
                                    <div class="product-price">
                                        <span class="original-price">${formatPrice(product.originalPrice)}</span>
                                        <span class="discounted-price">${formatPrice(product.discountedPrice)}</span>
                                    </div>
                                    <div class="product-actions">
                                        <button class="btn-primary" onclick="addToCart('${product.id}')">Mua ngay</button>
                                        <button class="btn-secondary" onclick="viewProductDetail('${product.id}')">Chi ti·∫øt</button>
                                    </div>
                                </div>
                            `;
                            
                            productsContainer.appendChild(productCard);
                        });
                    }, (error) => {
                        console.error('L·ªói khi load s·∫£n ph·∫©m khuy·∫øn m√£i:', error);
                        productsContainer.innerHTML = `
                            <div class="product-card">
                                <div class="product-info">
                                    <p>Kh√¥ng th·ªÉ t·∫£i s·∫£n ph·∫©m khuy·∫øn m√£i. Vui l√≤ng th·ª≠ l·∫°i sau.</p>
                                </div>
                            </div>
                        `;
                    });
            }

            // H√†m x·ª≠ l√Ω ƒëƒÉng k√Ω nh·∫≠n th√¥ng tin khuy·∫øn m√£i
            function submitPromotion(event) {
                event.preventDefault();
                
                const user = auth.currentUser;
                const form = event.target;
                const button = form.querySelector('button');
                
                const promotionData = {
                    fullName: form.querySelector('#promotionName').value.trim(),
                    email: form.querySelector('#promotionEmail').value.trim(),
                    phone: form.querySelector('#promotionPhone').value.trim(),
                    status: 'active',
                    createdAt: firebase.database.ServerValue.TIMESTAMP,
                    updatedAt: firebase.database.ServerValue.TIMESTAMP
                };

                // Validate d·ªØ li·ªáu
                if (!promotionData.fullName || !promotionData.email || !promotionData.phone) {
                    showError('L·ªói', 'Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin');
                    return;
                }

                // Validate email
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(promotionData.email)) {
                    showError('L·ªói', 'Email kh√¥ng h·ª£p l·ªá');
                    return;
                }

                // Validate phone
                const phoneRegex = /^[0-9]{10,11}$/;
                if (!phoneRegex.test(promotionData.phone)) {
                    showError('L·ªói', 'S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá');
                    return;
                }

                button.disabled = true;

                // Ki·ªÉm tra ƒëƒÉng nh·∫≠p tr∆∞·ªõc khi g·ª≠i
                if (!user) {
                    showConfirm('Vui l√≤ng ƒëƒÉng nh·∫≠p', 'B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ ƒëƒÉng k√Ω nh·∫≠n th√¥ng tin khuy·∫øn m√£i')
                        .then((result) => {
                            if (result.isConfirmed) {
                                showModal('loginModal');
                            }
                        });
                    button.disabled = false;
                    return;
                }

                // Th√™m userId v√†o d·ªØ li·ªáu
                promotionData.userId = user.uid;

                // L∆∞u th√¥ng tin ƒëƒÉng k√Ω v√†o Firebase
                const registrationRef = database.ref('promotion_registrations').push();
                registrationRef.set(promotionData)
                    .then(() => {
                        showSuccess('Th√†nh c√¥ng', 'C·∫£m ∆°n b·∫°n ƒë√£ ƒëƒÉng k√Ω nh·∫≠n th√¥ng tin khuy·∫øn m√£i!');
                        form.reset();
                    })
                    .catch((error) => {
                        console.error('L·ªói khi ƒëƒÉng k√Ω:', error);
                        showError('L·ªói', 'Kh√¥ng th·ªÉ ƒëƒÉng k√Ω. Vui l√≤ng th·ª≠ l·∫°i sau.');
                    })
                    .finally(() => {
                        button.disabled = false;
                    });
            }

            // Load d·ªØ li·ªáu khi trang ƒë∆∞·ª£c t·∫£i
            document.addEventListener('DOMContentLoaded', () => {
                loadTestimonials();
                loadPromotions();
                loadPromotionProducts();
            });
        </script>

        <footer class="footer">
            <div class="footer-container">
                <div class="footer-section">
                    <h3 class="footer-title">V·ªÅ M·ªôc Nhi√™n</h3>
                    <p>V·ªõi nhi·ªÉu nƒÉm nghi√™n c·ª©u v·ªÅ c√°c s·∫£n ph·∫©m n·ªôi th·∫•t, M·ªôc Nhi√™n t·ª± h√†o mang ƒë·∫øn nh·ªØng s·∫£n ph·∫©m n·ªôi th·∫•t g·ªó t·ª± nhi√™n ch·∫•t l∆∞·ª£ng cao, thi·∫øt k·∫ø ƒë·ªôc ƒë√°o v√† tinh t·∫ø.</p>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title">Li√™n h·ªá</h3>
                    <div class="footer-contact-item">
                        <span class="footer-contact-icon">üìç</span>
                        <span>Nguy·ªÖn VƒÉn C·ª´, An Kh√°nh, Ninh Ki·ªÅu, C·∫ßn Th∆° </span>
                    </div>
                    <div class="footer-contact-item">
                        <span class="footer-contact-icon">üì±</span>
                        <span>0123456789</span>
                    </div>
                    <div class="footer-contact-item">
                        <span class="footer-contact-icon">‚úâÔ∏è</span>
                        <span>noithatmocnhien@gmail.com</span>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title">Danh m·ª•c</h3>  
                    <ul class="footer-links">
                        <li><a href="#">Ph√≤ng kh√°ch</a></li>
                        <li><a href="#">Ph√≤ng ng·ªß</a></li>
                        <li><a href="#">Ph√≤ng b·∫øp</a></li>
                        <li><a href="#">Ph√≤ng l√†m vi·ªác</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title">Theo d√µi</h3>
                    <ul class="footer-links">
                        <li><a href="#">Facebook</a></li>
                        <li><a href="#">Instagram</a></li>
                        <li><a href="#">Email</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 N·ªôi th·∫•t M·ªôc Nhi√™n. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
            </div>
        </footer>

        <!-- Modal Overlay -->
        <div class="modal-overlay" id="modalOverlay"></div>

        <!-- Modal ƒêƒÉng nh·∫≠p -->
        <div class="modal" id="loginModal">
            <div class="modal-header">
                <h2 class="modal-title">ƒêƒÉng nh·∫≠p</h2>
                <p class="modal-subtitle">ƒêƒÉng nh·∫≠p ƒë·ªÉ tr·∫£i nghi·ªám d·ªãch v·ª• t·ªët nh·∫•t t·ª´ M·ªôc Nhi√™n</p>
            </div>
            <form class="modal-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <input type="email" class="form-input" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" class="form-input" placeholder="M·∫≠t kh·∫©u" required>
                </div>
                <button type="submit" class="form-button">
                    <span>ƒêƒÉng nh·∫≠p</span>
                    <div class="spinner"></div>
                </button>
            </form>
            <div class="modal-links">
                <a class="modal-link" onclick="showModal('registerModal')">ƒêƒÉng k√Ω t√†i kho·∫£n m·ªõi</a>
                <br>
                <a class="modal-link" onclick="showModal('forgotModal')">Qu√™n m·∫≠t kh·∫©u?</a>
            </div>
        </div>

        <!-- Modal ƒêƒÉng k√Ω -->
        <div class="modal" id="registerModal">
            <div class="modal-header">
                <h2 class="modal-title">ƒêƒÉng k√Ω</h2>
                <p class="modal-subtitle">T·∫°o t√†i kho·∫£n ƒë·ªÉ nh·∫≠n nhi·ªÅu ∆∞u ƒë√£i t·ª´ M·ªôc Nhi√™n</p>
            </div>
            <form class="modal-form" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <input type="text" class="form-input" placeholder="H·ªç v√† t√™n" required>
                </div>
                <div class="form-group">
                    <input type="email" class="form-input" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" class="form-input" placeholder="M·∫≠t kh·∫©u" required>
                </div>
                <div class="form-group">
                    <input type="password" class="form-input" placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u" required>
                </div>
                <button type="submit" class="form-button">
                    <span>ƒêƒÉng k√Ω</span>
                    <div class="spinner"></div>
                </button>
            </form>
            <div class="modal-links">
                <a class="modal-link" onclick="showModal('loginModal')">ƒê√£ c√≥ t√†i kho·∫£n? ƒêƒÉng nh·∫≠p</a>
            </div>
        </div>

        <!-- Modal Qu√™n m·∫≠t kh·∫©u -->
        <div class="modal" id="forgotModal">
            <div class="modal-header">
                <h2 class="modal-title">Qu√™n m·∫≠t kh·∫©u</h2>
                <p class="modal-subtitle">Nh·∫≠p email ƒë·ªÉ nh·∫≠n link ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u</p>
            </div>
            <form class="modal-form" onsubmit="handleForgotPassword(event)">
                <div class="form-group">
                    <input type="email" class="form-input" placeholder="Email" required>
                </div>
                <button type="submit" class="form-button">
                    <span>G·ª≠i y√™u c·∫ßu</span>
                    <div class="spinner"></div>
                </button>
            </form>
            <div class="modal-links">
                <a class="modal-link" onclick="showModal('loginModal')">Quay l·∫°i ƒëƒÉng nh·∫≠p</a>
            </div>
        </div>

        <script src="https://app.tudongchat.com/js/chatbox.js"></script>
        <script>
          const tudong_chatbox = new TuDongChat('fvnnpQFt5lp13VAR7GEiK')
          tudong_chatbox.initial()
        </script>
    </body>
</html>